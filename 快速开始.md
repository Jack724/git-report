# 快速开始指南

## Windows 用户 - 3步启动

### 第一步: 安装依赖
双击运行 `install.bat` (会自动安装 uv 和项目依赖)

**注意**:
- 批处理文件可能显示部分乱码,这是 Windows 编码问题,不影响功能
- 只要没有看到 "ERROR" 字样,就是成功的
- 最后会显示 "Installation completed successfully!"

### 第二步: 获取 API Key
1. 访问: https://open.bigmodel.cn/
2. 注册并获取 GLM API Key

### 第三步: 启动程序
双击运行 `run.bat`

---

## 使用 uv 手动安装(推荐)

```bash
# 1. 安装 uv (如果还没安装)
# Windows:
powershell -c "irm https://astral.sh/uv/install.ps1 | iex"

# macOS/Linux:
curl -LsSf https://astral.sh/uv/install.sh | sh

# 2. 安装依赖
uv sync

# 3. 运行程序
uv run python main.py

# 4. 测试模块
uv run python test_modules.py
```

---

## 完整使用流程

1. **配置仓库**
   - 在界面中点击"浏览"选择你的 Git 仓库
   - 输入作者姓名和邮箱(可选)

2. **设置 API Key**
   - 在"GLM API Key"输入框粘贴你的密钥
   - 点击"保存配置"

3. **拉取提交记录**
   - 选择日期范围(默认最近7天)
   - 点击"拉取提交记录"
   - 查看表格中的提交列表

4. **生成报告**
   - 点击"生成报告"
   - 等待10-20秒
   - 在弹窗中查看报告
   - 点击"复制报告"使用

---

## 测试模块

运行测试脚本验证安装:

**使用 uv (推荐)**:
```bash
uv run python test_modules.py
```

**使用 python**:
```bash
python test_modules.py
```

---

## 常见问题

**Q: 找不到 Python?**
- 安装 Python 3.8+ 并添加到环境变量
- 下载地址: https://www.python.org/downloads/

**Q: install.bat 显示乱码?**
- 这是 Windows 编码问题,不影响功能
- 只要没有 "ERROR" 字样就是成功的
- 可以使用命令行手动安装: `uv sync`

**Q: uv 安装失败?**
- Windows 用户: 确保 PowerShell 执行策略允许运行脚本
- macOS/Linux 用户: 确保有 curl 权限
- 手动安装文档: https://docs.astral.sh/uv/getting-started/installation/

**Q: 依赖安装失败?**
- 使用 uv (推荐): `uv sync`
- 使用 pip: `pip install -r requirements.txt`
- 使用国内镜像: `pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple`

**Q: 程序无法启动?**
- 运行 `uv run python test_modules.py` 检查哪个模块有问题
- 确保所有依赖都已安装
- 检查 Python 版本是否 >= 3.8

**Q: API 调用失败?**
- 检查 API Key 是否正确
- 检查网络连接
- 确认 API 额度充足

---

## 打包构建

将应用程序打包成独立可执行文件：

### 使用 Python 构建脚本

**支持所有环境**（Windows CMD、PowerShell、Git Bash、Linux、macOS）：

```bash
python build.py
```

### 构建输出
- 输出目录：`dist/GitReport/`
- Windows：`dist/GitReport/GitReport.exe`
- 配置数据：`dist/GitReport/data/`

---

## 项目文件说明

```
git-report/
├── main.py              # 程序入口
├── build.py             # 跨平台构建脚本
├── install.bat          # Windows 安装脚本
├── run.bat              # Windows 启动脚本
├── test_modules.py      # 模块测试脚本
├── git-report.spec      # PyInstaller 配置
├── requirements.txt     # 依赖清单
├── core/                # 核心模块
│   ├── config_manager.py   # 配置管理
│   ├── git_service.py      # Git 操作
│   ├── formatter.py        # 数据格式化
│   └── ai_client.py        # AI API 调用
├── ui/                  # 界面模块
│   └── main_window.py      # 主窗口
├── cache/               # 缓存目录
├── reports/             # 报告输出目录
├── dist/                # 构建输出目录
└── config.json          # 配置文件(首次运行自动生成)
```

---

## 提示

- 首次使用建议选择小型仓库或较短时间范围测试
- 提交消息使用 `feat:` `fix:` 等前缀会获得更好的分类效果
- 生成报告需要 10-20 秒,请耐心等待
- 可以对同一批提交多次生成报告
